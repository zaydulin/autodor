{% extends 'site/useraccount/base.html' %}
{% load static %}
{% block title %}{{ seo_title }}{% endblock title %}
{% block description %}{{ seo_description }}{% endblock description %}
{% block propertytitle %}{% if seo_previev %}{{ seo_previev.url }} {% endif %} {% endblock propertytitle %}
{% block propertydescription %}{{ seo_propertytitle }}{% endblock propertydescription %}
{% block propertyimage %}{{ seo_propertydescription }}{% endblock propertyimage %}
{% block head %}{% endblock head %}

{% block content %}
<div class="container py-4">
    <div class="row g-4">
        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
        <div class="col-lg-8">
            <div class="card">
                <div class="card-body">
                    <h2 class="mb-1">{{ advert.name }}</h2>
                    <div class="d-flex">
                        <div class="h4 text-primary fw-bold m-3">–°—Ç–æ–∏–º–æ—Å—Ç—å {{ advert.price }} {{ advert.currency }}</div>
                    </div>

                    <div class="row row-cols-2 row-cols-md-3 g-2 mb-3">
                        {% if advert.year %}<div class="col"><span class="badge bg-light text-dark spec-badge">–ì–æ–¥: {{ advert.year }}</span></div>{% endif %}
                        {% if advert.mileage %}<div class="col"><span class="badge bg-light text-dark spec-badge">–ü—Ä–æ–±–µ–≥: {{ advert.mileage }} –∫–º</span></div>{% endif %}
                        {% if advert.color %}<div class="col"><span class="badge bg-light text-dark spec-badge">–¶–≤–µ—Ç: {{ advert.color }}</span></div>{% endif %}
                        {% if advert.doors %}<div class="col"><span class="badge bg-light text-dark spec-badge">–î–≤–µ—Ä–µ–π: {{ advert.doors }}</span></div>{% endif %}
                        {% if advert.engine_volume %}<div class="col"><span class="badge bg-light text-dark spec-badge">–û–±—ä—ë–º: {{ advert.engine_volume }} –ª</span></div>{% endif %}
                        {% if advert.power %}<div class="col"><span class="badge bg-light text-dark spec-badge">–ú–æ—â–Ω.: {{ advert.power }} –ª.—Å.</span></div>{% endif %}
                        {% if advert.transmission %}<div class="col"><span class="badge bg-light text-dark spec-badge">–ö–æ—Ä–æ–±–∫–∞: {{ advert.get_transmission_display }}</span></div>{% endif %}
                        {% if advert.fuel %}<div class="col"><span class="badge bg-light text-dark spec-badge">–¢–æ–ø–ª–∏–≤–æ: {{ advert.get_fuel_display }}</span></div>{% endif %}
                        {% if advert.drive %}<div class="col"><span class="badge bg-light text-dark spec-badge">–ü—Ä–∏–≤–æ–¥: {{ advert.get_drive_display }}</span></div>{% endif %}
                    </div>

                    {% if advert.images %}
                    <div id="advCarousel" class="carousel slide gallery mb-3" data-bs-ride="carousel">
                        <div class="carousel-inner rounded">
                            {% for img in advert.images %}
                            <div class="carousel-item {% if forloop.first %}active{% endif %}">
                                <img src="{{ img }}" class="d-block w-100" alt="{{ advert.name }}">
                            </div>
                            {% endfor %}
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#advCarousel" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon"></span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#advCarousel" data-bs-slide="next">
                            <span class="carousel-control-next-icon"></span>
                        </button>
                    </div>
                    {% endif %}
                </div>
            </div>

            <!-- –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ -->
            <div class="row mt-1">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header"><h5 class="mb-0">–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</h5></div>
                        <div class="card-body">
                            <iframe class="osm-iframe" src="https://www.openstreetmap.org/export/embed.html?bbox=37.6173,55.7558,37.6173,55.7558&layer=mapnik&marker=55.7558,37.6173"></iframe>
                            <div class="small text-muted mt-2">–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–∞—è –ø–ª–æ—â–∞–¥—å</div>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ -->
        <div class="col-lg-4">
            <div class="d-grid gap-2">
                <button class="btn btn-light border" data-bs-toggle="offcanvas" data-bs-target="#offcanvasCalls">‚òéÔ∏è –ó–≤–æ–Ω–∫–∏</button>
                <button class="btn btn-primary" data-bs-toggle="offcanvas" data-bs-target="#offcanvasChat">üí¨ –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç</button>
                <button class="btn btn-primary" >–í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </div>

            <!-- –ó–∞—è–≤–∫–∞ -->
            <div class="card mb-4">
                <div class="card-header"><h5 class="mb-0">–ó–∞—è–≤–∫–∞ ‚Ññ12345</h5></div>
                <div class="card-body">
                    <div class="mb-2"><strong>–°—Ç–∞—Ç—É—Å:</strong> –ù–æ–≤–∞—è</div>
                    <div class="mb-2"><strong>–°–æ–∑–¥–∞–Ω–∞:</strong> 10.08.2025 14:30</div>
                    <hr>
                    <div class="mb-2"><strong>–ó–∞–∫–∞–∑—á–∏–∫:</strong></div>
                    <ul class="list-unstyled mb-0">
                        <li class="d-flex align-items-center gap-2 mb-2">
                            <span class="avatar">–ò</span>
                            <div><div class="fw-semibold">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</div><div class="small text-muted">ivan@example.com</div></div>
                        </li>
                    </ul>

                    <!-- –ú–µ–Ω–µ–¥–∂–µ—Ä—ã -->
                    <div class="mb-2"><strong>–ú–µ–Ω–µ–¥–∂–µ—Ä—ã:</strong></div>
                    <ul class="list-unstyled mb-0">
                        <li class="d-flex align-items-center gap-2 mb-2">
                            <span class="avatar">–ò</span>
                            <div><div class="fw-semibold">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</div><div class="small text-muted">ivan@example.com</div></div>
                        </li>
                        <li class="d-flex align-items-center gap-2 mb-2">
                            <span class="avatar">–ü</span>
                            <div><div class="fw-semibold">–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤</div><div class="small text-muted">petr@example.com</div></div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ -->
            <div class="card mb-4">
                <div class="card-header"><h5 class="mb-0">–î–æ–∫—É–º–µ–Ω—Ç—ã</h5></div>
                <div class="card-body">
                    <ul class="list-group">
                        <li class="list-group-item d-flex align-items-center justify-content-between">
                            <div>
                                <i class="bi bi-file-earmark-text me-2 text-primary"></i> –î–æ–≥–æ–≤–æ—Ä.pdf
                            </div>
                            <a href="#" class="btn btn-outline-primary btn-sm">
                                <i class="bi bi-download"></i>
                            </a>
                        </li>
                        <li class="list-group-item d-flex align-items-center justify-content-between">
                            <div>
                                <i class="bi bi-file-earmark-image me-2 text-success"></i> –§–æ—Ç–æ_–∞–≤—Ç–æ.jpg
                            </div>
                            <a href="#" class="btn btn-outline-primary btn-sm">
                                <i class="bi bi-download"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- –†–∞—Å—Ö–æ–¥—ã -->
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">–†–∞—Å—Ö–æ–¥—ã</h5>
                    <span class="badge bg-primary">–ò—Ç–æ–≥–æ: 50 000 ‚ÇΩ</span>
                </div>
                <div class="card-body">
                    <table class="table table-sm align-middle">
                        <thead>
                        <tr><th>–°—Ç–∞—Ç—å—è</th><th class="text-end">–°—É–º–º–∞</th><th>–î–∞—Ç–∞</th></tr>
                        </thead>
                        <tbody>
                        <tr><td>–°—Ç—Ä–∞—Ö–æ–≤–∫–∞</td><td class="text-end">20 000 ‚ÇΩ</td><td>01.03.2025</td></tr>
                        <tr><td>–¢–û</td><td class="text-end">30 000 ‚ÇΩ</td><td>15.06.2025</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Offcanvas: –ó–≤–æ–Ω–∫–∏ -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCalls">
    <div class="offcanvas-header">
        <h5>–ó–≤–æ–Ω–∫–∏</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body">
        <!-- –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
        <h6 class="mb-3">–£—á–∞—Å—Ç–Ω–∏–∫–∏</h6>
        <ul class="list-group mb-4">
            <li class="list-group-item d-flex align-items-center justify-content-between">
                <div class="d-flex align-items-center">
                    <img src="https://via.placeholder.com/40" class="rounded-circle me-2" alt="–ê–≤–∞—Ç–∞—Ä –ò–≤–∞–Ω">
                    <span>–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</span>
                </div>
                <button class="btn btn-success btn-sm">
                    <i class="bi bi-telephone-fill"></i> –ü–æ–∑–≤–æ–Ω–∏—Ç—å
                </button>
            </li>
        </ul>

        <!-- –ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤ -->
        <h6 class="mb-3">–ò—Å—Ç–æ—Ä–∏—è –∑–≤–æ–Ω–∫–æ–≤</h6>
        <ul class="list-group">
            <li class="list-group-item">12.07.2025 ‚Äî –ò—Å—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫</li>
            <li class="list-group-item">15.07.2025 ‚Äî –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫</li>
        </ul>
    </div>
</div>

<!-- Offcanvas: –ß–∞—Ç -->
<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasChat">
    <div class="offcanvas-header">
        <h5>–ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body d-flex flex-column">
        <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
        <div class="flex-grow-1 overflow-auto border rounded p-2 mb-2" style="min-height:260px;">
            <div class="d-flex mb-2">
                <div class="bg-primary text-white p-2 rounded" style="max-width: 75%;">
                    <div class="fw-bold small">–Ø</div>
                    –î–æ–±—Ä—ã–π –¥–µ–Ω—å!
                </div>
            </div>
            <div class="d-flex justify-content-end mb-2">
                <div class="bg-light p-2 rounded" style="max-width: 75%;">
                    <div class="fw-bold small text-end">–ü–µ—Ç—Ä</div>
                    –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –ª–∏ –≤–∞—Å –æ–±–º–µ–Ω?
                </div>
            </div>
        </div>

        <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ -->
        <form class="d-flex gap-2">
            <input class="form-control" type="text" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶">
            <button class="btn btn-primary" type="button">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </form>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("toggle-desc");
    if (toggle) {
        toggle.addEventListener("click", function (e) {
            e.preventDefault();
            const moreText = document.getElementById("more-text");
            const p = document.getElementById("description-text");

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏
            if (moreText.style.display === "none") {
                moreText.style.display = "inline";
                p.innerHTML = moreText.innerHTML + ' <a href="#" id="toggle-desc">–°–∫—Ä—ã—Ç—å</a>';
            } else {
                moreText.style.display = "none";
                p.innerHTML = p.innerHTML.split('<a')[0] + ' <a href="#" id="toggle-desc">–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é</a>';
            }
        });
    }
});

</script>
{% endblock %}
